name: Secondary Flickr to Instagram Automation
run-name: "Secondary Account - ${{ github.event_name == 'schedule' && 'Scheduled' || 'Manual' }} Run (${{ github.run_number }})"

on:
  # Daily posting at 05:11 UTC (07:11 CEST)
  # schedule:
  #   - cron: '11 5 * * *'
  #   - cron: '15 11 * * *'  # Test run

  # Manual trigger with options
  workflow_dispatch:
    inputs:
      dry_run:
        description: 'Run without posting (dry run)'
        type: boolean
        default: false
      show_stats:
        description: 'Show statistics only'
        type: boolean
        default: false

# Ensure only one Reisememo automation runs at a time
concurrency:
  group: social-media-automation-reisememo
  cancel-in-progress: false

permissions:
  contents: read
  issues: write        # For legacy GitHub Issues (compatibility)
  actions: write       # For repository variables state management

jobs:
  automation:
    uses: ./.github/workflows/social-automation.yml
    with:
      account_id: reisememo
      environment_name: secondary-account
      account_flag: reisememo  # Pass account flag for secondary account
      dry_run: ${{ inputs.dry_run || false }}
      show_stats: ${{ inputs.show_stats || false }}
    secrets: inherit